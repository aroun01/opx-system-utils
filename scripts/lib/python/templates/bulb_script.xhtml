<script type="text/javascript">
  FusionCharts.ready(function(){
    var fusion${name} = new FusionCharts({
    type: 'bulb',
    renderAt: 'chart-${name}',
    id: '${name}Chart',
    width: '${hsize}',
    height: '${vsize}',
    dataFormat: 'json',
    dataSource: {
        "chart": {
            "caption": "${caption}",
            "lowerLimit": "${lowLimit}",
            "upperLimit": "${upLimit}",
            "captionPadding": "10",
            "showshadow": "1",
            "showvalue": "1",
            "useColorNameAsValue": "1",
            "placeValuesInside": "1",
            "valueFontSize": "13",
            //Tooltext
            "plottooltext": "${tooltext}",
            //Theme
        },
        "colorrange": {
            "color": [{
                "minvalue": "${redLlimit}",
                "maxvalue": "${redUlimit}",
                "label": "${redLabel}",
                "code": "#ff0000"
            }, {
                "minvalue": "${yellowLlimit}",
                "maxvalue": "${yellowUlimit}",
                "label": "${yellowLabel}",
                "code": "#ff9900"
            }, {
                "minvalue": "${greenLlimit}",
                "maxvalue": "${greenUlimit}",
                "label": "${greenLabel}",
                "code": "#00ff00"
            }]
        },
        "value": "$$${value}"
    },
    "events": {
        "rendered": function(evtObj, argObj) {
            evtObj.sender.chartInterval = setInterval(function() {
                xmlHttp = new XMLHttpRequest();
                xmlHttp.open( "GET", '${fetch}', false );
                xmlHttp.send( null );
                var num = xmlHttp.responseText;
                FusionCharts("${name}Chart").feedData("&value=" + num);
            }, ${pullRate});
        },
        "disposed": function(evt, arg) {
            clearInterval(evt.sender.chartInterval);
        }
    }
}
);
    fusion${name}.render();
});
</script>
